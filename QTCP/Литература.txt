https://habr.com/ru/articles/111239/
особо не использовал

Примеры из книжки Шлее. Упростил максимально и заработали